!function(){Discourse.dialect_deprecated||(Discourse.Dialect.inlineBetween({start:"\\(",stop:"\\)",rawContents:!0,emitter:function(t){return"\\("+t+"\\)"}}),Discourse.Dialect.inlineBetween({start:"\\[",stop:"\\]",rawContents:!0,emitter:function(t){return"\\["+t+"\\]"}}),Discourse.Dialect.inlineBetween({start:"$$",stop:"$$",rawContents:!0,emitter:function(t){return"$$"+t+"$$"}}),Discourse.Dialect.inlineBetween({start:"$",stop:"$",rawContents:!0,emitter:function(t){return"$"+t+"$"}}),Discourse.Dialect.inlineRegexp({start:"\\begin",matcher:/(\\begin{[\S\s]+})([\S\s]*)(\\end{[\S\s]+})/,emitter:function(t){return t[0]}}),Discourse.Dialect.inlineBetween({start:"ˊˊ",stop:"ˊˊ",rawContents:!0,emitter:function(t){return"ˊˊ"+t+"ˊˊ"}}),Discourse.Dialect.inlineBetween({start:"ˊ",stop:"ˊ",rawContents:!0,emitter:function(t){return"ˊ"+t+"ˊ"}}))}(),define("discourse/plugins/MathJax support for Discourse/initializers/mathjax",["discourse/lib/plugin-api","discourse/lib/load-script","exports"],function(t,e,i){"use strict";function o(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,"topic"])}function s(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,"wmd-preview"]);var t=Discourse.Utilities.caretPosition(this.wmdInput[0]);if(!this.wmdInput.val().substring(t).match(/\\n/)){var e=$("#wmd-preview");e.is(":visible")&&e.scrollTop(e[0].scrollHeight)}}function n(){MathJax.Hub.Config({"HTML-CSS":{preferredFont:"TeX",availableFonts:["TeX"],linebreaks:{automatic:!0},EqnChunk:MathJax.Hub.Browser.isMobile?10:50},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0},TeX:{noUndefined:{attributes:{mathcolor:"red",mathbackground:"#FFEEEE",mathsize:"90%"}},Macros:{href:"{}"}},messageStyle:"none"})}function r(t){var e=t.lookup("site-settings:main");e.enable_mathjax_plugin&&l(e.mathjax_url+"?config="+e.mathjax_config,{scriptTag:!0}).then(function(){n(),c(t,o),t.lookupFactory("view:composer").prototype.on("previewRefreshed",s)})}function a(t){var e=t.container,i=e.lookup("site-settings:main");i.enable_mathjax_plugin&&l(i.mathjax_url+"?config="+i.mathjax_config,{scriptTag:!0}).then(function(){n(),t.decorateCooked(function(t){return $.each(t,function(t,e){return MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])})})})}var u=t.withPluginApi,c=t.decorateCooked,l=e.default;i.default={name:"discourse-mathjax",after:"inject-objects",initialize:function(t){u("0.1",function(t){return a(t)},{noApi:function(){return r(t)}})}}}),define("discourse/plugins/discourse-narrative-bot/initializers/new-user-narrative",["discourse/lib/plugin-api","exports"],function(t,e){"use strict";function i(t){var e=t.container.lookup("message-bus:main"),i=t.getCurrentUser(),o=t.container.lookup("app-events:main");t.container.lookupFactory("component:site-header").reopen({didInsertElement:function(){this._super(),this.dispatch("header:search-context-trigger","header")}}),t.attachWidgetAction("header","headerSearchContextTrigger",function(){this.site.mobileView?this.state.skipSearchContext=!1:(this.state.contextEnabled=!0,this.state.searchContextType="topic")}),e&&i&&e.subscribe("/new_user_narrative/tutorial_search",function(){o.trigger("header:search-context-trigger")})}var o=t.withPluginApi;e.default={name:"new-user-narratve",initialize:function(t){t.lookup("site-settings:main").discourse_narrative_bot_enabled&&o("0.5",i)}}}),define("discourse/plugins/discourse-voting/discourse/routes/user-activity-votes",["discourse/routes/user-topic-list","discourse/models/user-action","exports"],function(t,e,i){"use strict";var o=t.default,s=e.default;i.default=o.extend({userActionType:s.TYPES.topics,model:function(){return this.store.findFiltered("topicList",{filter:"topics/voted-by/"+this.modelFor("user").get("username_lower")})}})}),define("discourse/plugins/discourse-voting/discourse/pre-initializers/extend-category-for-voting",["ember-addons/ember-computed-decorators","discourse/models/category","discourse/lib/plugin-api","exports"],function(t,e,i,o){"use strict";function s(t){for(var e={},i=0;i<t.length;i++){var o=t[i],s=o.decorators,n=o.key;if(delete o.key,delete o.decorators,o.enumerable=!0,o.configurable=!0,("value"in o||o.initializer)&&(o.writable=!0),s)for(var r=0;r<s.length;r++){var a=s[r];if("function"!=typeof a)throw new TypeError("The decorator for method "+o.key+" is of the invalid type "+typeof a);o=a(e,n,o)||o}o.initializer&&(o.value=o.initializer.call(e)),Object.defineProperty(e,n,o)}return e}function n(t){t.addPostClassesCallback(function(t){if(1===t.post_number&&t.can_vote)return["voting-post"]}),t.includePostAttributes("can_vote"),t.addTagsHtmlCallback(function(t){if(t.can_vote){var e=[],i=void 0;t.user_voted&&(i=" title='"+I18n.t("voting.voted")+"'");var o=t.user_voted?" voted":"";return e.push("<a href='"+t.get("url")+"' class='list-vote-count discourse-tag"+o+"'"+i+">"),e.push(I18n.t("voting.votes",{count:t.vote_count})),t.user_voted&&e.push("<i class='fa fa-star'></i>"),e.push("</a>"),e.length>0?e.join(""):void 0}},{priority:-100})}var r=t.default,a=e.default,u=i.withPluginApi;o.default={name:"extend-category-for-voting",before:"inject-discourse-objects",initialize:function(t){u("0.8.4",function(t){n(t)}),a.reopen(s([{key:"votesUrl",decorators:[r("url")],value:function(t){return t+"/l/votes"}},{key:"enable_topic_voting",decorators:[r("custom_fields.enable_topic_voting")],initializer:function(){return{get:function(t){return"true"===t},set:function(t){return t=t?"true":"false",this.set("custom_fields.enable_topic_voting",t),t}}}}]))}}}),Ember.TEMPLATES["javascripts/connectors/topic-above-post-stream/topic-title-voting"]=Ember.HTMLBars.template({id:null,block:'{"statements":[["block",["if"],[["get",["model","can_vote"]]],null,2]],"locals":[],"named":[],"yields":[],"blocks":[{"statements":[["text","      "],["open-element","div",[]],["static-attr","class","voting title-voting"],["flush-element"],["text","\\n        "],["append",["helper",["mount-widget"],null,[["widget","args"],["vote-box",["get",["model"]]]]],false],["text","\\n      "],["close-element"],["text","\\n"]],"locals":[]},{"statements":[["block",["if"],[["get",["model","postStream","firstPostPresent"]]],null,0]],"locals":[]},{"statements":[["block",["if"],[["get",["model","postStream","loaded"]]],null,1]],"locals":[]}],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/topic-above-post-stream/topic-title-voting"}}),define("discourse/plugins/discourse-voting/discourse/templates/connectors/extra-nav-item/votes",["exports"],function(t){"use strict";t.default={votedPath:function(){return"foobar"},setupComponent:function(t,e){var i=t.filterMode;i&&-1!==i.indexOf("votes",i.length-5)&&e.set("classNames",["active"])},shouldRender:function(t,e){var i=e.get("category");return!(!i||!i.get("can_vote"))}}}),Ember.TEMPLATES["javascripts/connectors/extra-nav-item/votes"]=Ember.HTMLBars.template({id:null,block:'{"statements":[["open-element","a",[]],["dynamic-attr","title",["concat",[["helper",["I18n"],["voting.votes_nav_help"],null]]]],["dynamic-attr","href",["concat",[["unknown",["category","votesUrl"]]]]],["flush-element"],["append",["helper",["I18n"],["voting.vote_title_plural"],null],false],["close-element"],["text","\\n"]],"locals":[],"named":[],"yields":[],"blocks":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/extra-nav-item/votes"}}),Ember.TEMPLATES["javascripts/connectors/category-custom-settings/feature-voting-settings"]=Ember.HTMLBars.template({id:null,block:'{"statements":[["open-element","section",[]],["static-attr","class","field"],["flush-element"],["text","\\n  "],["open-element","div",[]],["static-attr","class","enable-topic-voting"],["flush-element"],["text","\\n    "],["open-element","label",[]],["static-attr","class","checkbox-label"],["flush-element"],["text","\\n      "],["append",["helper",["input"],null,[["type","checked"],["checkbox",["get",["category","enable_topic_voting"]]]]],false],["text","\\n      "],["append",["helper",["i18n"],["voting.allow_topic_voting"],null],false],["text","\\n    "],["close-element"],["text","\\n  "],["close-element"],["text","\\n"],["close-element"],["text","\\n"]],"locals":[],"named":[],"yields":[],"blocks":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/category-custom-settings/feature-voting-settings"}}),Ember.TEMPLATES["javascripts/connectors/user-activity-bottom/user-voted-topics"]=Ember.HTMLBars.template({id:null,block:'{"statements":[["block",["if"],[["get",["siteSettings","voting_show_votes_on_profile"]]],null,1]],"locals":[],"named":[],"yields":[],"blocks":[{"statements":[["text","    "],["open-element","i",[]],["static-attr","class","glyph fa fa-heart"],["flush-element"],["close-element"],["append",["helper",["i18n"],["voting.vote_title_plural"],null],false],["text","\\n"]],"locals":[]},{"statements":[["open-element","li",[]],["flush-element"],["text","\\n"],["block",["link-to"],["userActivity.votes"],null,0],["close-element"],["text","\\n"]],"locals":[]}],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/user-activity-bottom/user-voted-topics"}}),define("discourse/plugins/discourse-voting/discourse/widgets/remove-vote",["discourse/widgets/widget","exports"],function(t,e){"use strict";var i=t.createWidget;e.default=i("remove-vote",{tagName:"div.remove-vote",buildClasses:function(){return"vote-option"},html:function(){return["Remove vote"]},click:function(){this.sendWidgetAction("removeVote")}})}),define("discourse/plugins/discourse-voting/discourse/widgets/vote-count",["discourse/widgets/widget","virtual-dom","discourse/lib/ajax","exports"],function(t,e,i,o){"use strict";function s(t){return{template:t.avatar_template,username:t.username,post_url:t.post_url,url:Discourse.getURL("/users/")+t.username.toLowerCase()}}var n=t.createWidget,r=e.h,a=i.ajax;o.default=n("vote-count",{tagName:"div.vote-count-wrapper",buildKey:function(){return"vote-count"},buildClasses:function(){if(0===this.attrs.vote_count)return"no-votes"},defaultState:function(){return{whoVotedUsers:null}},html:function(t){var e=r("div.vote-count",t.vote_count.toString()),i=null;this.siteSettings.voting_show_who_voted&&this.state.whoVotedUsers&&this.state.whoVotedUsers.length>0&&(i=this.attach("small-user-list",{users:this.state.whoVotedUsers,addSelf:t.liked,listClassName:"regular-votes"}));var o=[e];return i&&o.push(r("div.who-voted.popup-menu.voting-popup-menu",[i])),o},click:function(){if(this.siteSettings.voting_show_who_voted&&this.attrs.vote_count>0){if(null===this.state.whoVotedUsers)return this.getWhoVoted();$(".who-voted").toggle()}},clickOutside:function(){$(".who-voted").hide()},getWhoVoted:function(){var t=this;return a("/voting/who",{type:"GET",data:{topic_id:this.attrs.id}}).then(function(e){t.state.whoVotedUsers=e.map(s)})}})}),define("discourse/plugins/discourse-voting/discourse/widgets/vote-options",["discourse/widgets/widget","virtual-dom","exports"],function(t,e,i){"use strict";var o=t.createWidget,s=e.h;i.default=o("vote-options",{tagName:"div.vote-options",buildClasses:function(){return"voting-popup-menu popup-menu hidden"},html:function(t){var e=[];return t.user_voted?e.push(this.attach("remove-vote",t)):this.currentUser&&this.currentUser.votes_exceeded&&!t.user_voted&&e.push([s("div",I18n.t("voting.reached_limit")),s("p",s("a",{href:this.currentUser.get("path")+"/activity/votes"},I18n.t("voting.list_votes")))]),e}})}),define("discourse/plugins/discourse-voting/discourse/widgets/vote-box",["discourse/widgets/widget","discourse/lib/ajax","discourse/widgets/raw-html","discourse/lib/ajax-error","exports"],function(t,e,i,o,s){"use strict";var n=t.createWidget,r=e.ajax,a=i.default,u=o.popupAjaxError;s.default=n("vote-box",{tagName:"div.voting-wrapper",buildKey:function(){return"vote-box"},buildClasses:function(){if(this.siteSettings.voting_show_who_voted)return"show-pointer"},defaultState:function(){return{allowClick:!0,initialVote:!1}},html:function(t,e){var i=this.attach("vote-count",t),o=this.attach("vote-button",t),s=this.attach("vote-options",t),n=[i,o,s];if(e.votesAlert>0){var r="<div class='voting-popup-menu vote-options popup-menu'>"+I18n.t("voting.votes_left",{count:e.votesAlert,path:this.currentUser.get("path")+"/activity/votes"})+"</div>";n.push(new a({html:r}))}return n},hideVotesAlert:function(){this.state.votesAlert&&(this.state.votesAlert=null,this.scheduleRerender())},click:function(){this.hideVotesAlert()},clickOutside:function(){this.hideVotesAlert()},addVote:function(){var t=this,e=this.attrs,i=this.state;return r("/voting/vote",{type:"POST",data:{topic_id:e.id}}).then(function(o){e.set("vote_count",o.vote_count),e.set("user_voted",!0),t.currentUser.set("votes_exceeded",!o.can_vote),o.alert&&(i.votesAlert=o.votes_left,t.scheduleRerender()),e.set("who_voted",o.who_voted),i.allowClick=!0}).catch(u)},removeVote:function(){var t=this,e=this.attrs,i=this.state;return r("/voting/unvote",{type:"POST",data:{topic_id:e.id}}).then(function(o){e.set("vote_count",o.vote_count),e.set("user_voted",!1),t.currentUser.set("votes_exceeded",!o.can_vote),e.set("who_voted",o.who_voted),i.allowClick=!0}).catch(u)}})}),define("discourse/plugins/discourse-voting/discourse/widgets/vote-button",["discourse/widgets/widget","discourse/lib/show-modal","exports"],function(t,e,i){"use strict";var o=t.createWidget,s=e.default;i.default=o("vote-button",{tagName:"div.vote-button",buildClasses:function(t){var e="";return e=t.closed?"voting-closed":t.user_voted?this.currentUser&&this.currentUser.votes_exceeded?"vote-limited nonvote":"vote":"nonvote",this.siteSettings.voting_show_who_voted&&(e+=" show-pointer"),e},html:function(t){I18n.t("voting.vote_title");return this.currentUser?t.closed?I18n.t("voting.voting_closed_title"):t.user_voted?I18n.t("voting.voted_title"):this.currentUser&&this.currentUser.votes_exceeded?I18n.t("voting.voting_limit"):I18n.t("voting.vote_title"):I18n.t("log_in")},click:function(){this.currentUser||s("login"),this.attrs.closed||!this.parentWidget.state.allowClick||this.attrs.user_voted||(this.parentWidget.state.allowClick=!1,this.parentWidget.state.initialVote=!0,this.sendWidgetAction("addVote")),(this.attrs.user_voted||this.currentUser.votes_exceeded)&&$(".vote-options").toggle()},clickOutside:function(){$(".vote-options").hide(),this.parentWidget.state.initialVote=!1}})}),define("discourse/plugins/discourse-voting/discourse/feature-voting-route-map",["exports"],function(t){"use strict";t.default={resource:"user",path:"users/:username",map:function(){this.route("userActivity",{path:"activity",resetNamespace:!0},function(){this.route("votes")})}}});
//# sourceMappingURL=/assets/plugin-third-party-3e7fd097beb6f75b400505b14431276151938f255ed877be64ca57b787aff49f.js.map